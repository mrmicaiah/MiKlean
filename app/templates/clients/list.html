{% extends "base.html" %}
{% block title %}Clients - MiKlean{% endblock %}

{% block header %}
<div class="flex items-center justify-between">
    <div>
        <h1 class="text-2xl font-bold text-ink tracking-tight">Clients</h1>
        <p class="text-sm text-ink/60 font-medium mt-0.5">{{ counts.all }} total</p>
    </div>
    <a href="{{ url_for('clients.new_client') }}" class="fab">
        <i data-lucide="plus" class="w-6 h-6 text-ink stroke-[2.5]"></i>
    </a>
</div>
{% endblock %}

{% block content %}
<!-- Search -->
<form method="GET" class="mb-4">
    <input type="hidden" name="type" value="{{ filter_type }}">
    <input type="text" name="search" value="{{ search }}"
        placeholder="ðŸ” Search clients..."
        class="input">
</form>

<!-- Filter Tabs -->
<div class="flex space-x-2 mb-4 overflow-x-auto hide-scrollbar">
    <a href="{{ url_for('clients.list_clients', type='all') }}" 
       class="px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap border-b-3
              {% if filter_type == 'all' %}bg-brand/10 border-brand text-ink{% else %}bg-white border-neutral-200 text-neutral-600{% endif %}">
        All ({{ counts.all }})
    </a>
    <a href="{{ url_for('clients.list_clients', type='prospect') }}" 
       class="px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap border-b-3
              {% if filter_type == 'prospect' %}bg-brand/10 border-brand text-ink{% else %}bg-white border-neutral-200 text-neutral-600{% endif %}">
        Prospects ({{ counts.prospect }})
    </a>
    <a href="{{ url_for('clients.list_clients', type='client') }}" 
       class="px-4 py-2 rounded-lg text-sm font-semibold whitespace-nowrap border-b-3
              {% if filter_type == 'client' %}bg-brand/10 border-brand text-ink{% else %}bg-white border-neutral-200 text-neutral-600{% endif %}">
        Clients ({{ counts.client }})
    </a>
</div>

<!-- Client List -->
{% if clients %}
<div class="space-y-3">
    {% for client in clients %}
    <a href="{{ url_for('clients.view_client', client_id=client.id) }}" class="card card-interactive block">
        <div class="flex justify-between items-center">
            <div>
                <h3 class="font-semibold text-ink">{{ client.name }}</h3>
                <p class="text-sm text-neutral-500">{{ client.phone }}</p>
            </div>
            <span class="badge badge-{{ client.type }}">{{ client.type|capitalize }}</span>
        </div>
    </a>
    {% endfor %}
</div>
{% else %}
<div class="card text-center py-10">
    <div class="w-14 h-14 bg-brand/20 rounded-full flex items-center justify-center mx-auto mb-3">
        <i data-lucide="users" class="w-7 h-7 text-brand"></i>
    </div>
    <h3 class="text-lg font-semibold text-ink mb-1">No clients yet</h3>
    <p class="text-neutral-500 text-sm">Add your first prospect to get started</p>
</div>
{% endif %}
{% endblock %}
